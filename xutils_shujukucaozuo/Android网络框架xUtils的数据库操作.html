<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Android网络框架xUtils的数据库操作</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="z5gm" id="android网络框架xutils的数据库操作">Android网络框架xUtils的数据库操作</h1><hr><p data-anchor-id="kx0k">一．目前xUtils主要有四大模块：</p><pre data-anchor-id="op4b"><code>DbUtils模块：用于数据库的操作，也是需要注解方式指定表名和列名；
ViewUtils模块：注解方式就可以进行UI，资源和事件绑定； 
HttpUtils模块：用于网络数据的请求； 
BitmapUtils模块：用于图片的下载和绑定视图；

  本文主要讲解xUtils中的数据库的增删改查操作。
</code></pre><p data-anchor-id="dw8o">使用：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="nhrh"><ol class="linenums"><li class="L0"><code><span class="typ">AndroidStudio</span><span class="pun">使用</span><span class="pln">xUtils</span><span class="pun">之前添加依赖就可以了：</span></code></li><li class="L1"><code><span class="pln">    compile </span><span class="str">'org.xutils:xutils:3.3.38'</span></code></li><li class="L2"><code><span class="typ">GitHub</span><span class="pun">中的源码地址：</span><span class="pln">https</span><span class="pun">:</span><span class="com">//github.com/wyouflf/xUtils3</span></code></li></ol></pre><p data-anchor-id="wm4l">二．DbUtils的使用示例</p><p data-anchor-id="k3lg">（一）添加依赖</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="lqzp"><ol class="linenums"><li class="L0"><code><span class="pln">compile </span><span class="str">'org.xutils:xutils:3.3.38'</span></code></li></ol></pre><p data-anchor-id="gfqh">（二）创建MyApp类继承Application</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="xktl"><ol class="linenums"><li class="L0"><code><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">lwz</span><span class="pun">.</span><span class="pln">db</span><span class="pun">;</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">        </span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="typ">Application</span><span class="pun">;</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">        </span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">.</span><span class="typ">DbManager</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">        </span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">.</span><span class="pln">x</span><span class="pun">;</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="com">/**</span></code></li><li class="L8"><code><span class="com"> * Application类，</span></code></li><li class="L9"><code><span class="com"> * 单例方法，数据共享，</span></code></li><li class="L0"><code><span class="com"> */</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyApp</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Application</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">    </span><span class="com">/**</span></code></li><li class="L5"><code><span class="com">     * 实现单例，任何一个页面都能拿到这个类的数据和对象</span></code></li><li class="L6"><code><span class="com">     */</span></code></li><li class="L7"><code><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">MyApp</span><span class="pln"> instance</span><span class="pun">;</span></code></li><li class="L8"><code></code></li><li class="L9"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">MyApp</span><span class="pln"> getInstance</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code><span class="pln">        </span><span class="kwd">return</span><span class="pln"> instance</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pln">    </span><span class="lit">@Override</span></code></li><li class="L4"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCreate</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">        </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">onCreate</span><span class="pun">();</span></code></li><li class="L6"><code><span class="pln">        x</span><span class="pun">.</span><span class="typ">Ext</span><span class="pun">.</span><span class="pln">init</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span><span class="com">//注册xUtils</span></code></li><li class="L7"><code><span class="pln">        instance </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code><span class="com">     * 获取数据库的管理器</span></code></li><li class="L2"><code><span class="com">     * 通过管理器进行增删改查</span></code></li><li class="L3"><code><span class="com">     */</span></code></li><li class="L4"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">DbManager</span><span class="pln"> getDbManager</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">        </span><span class="typ">DbManager</span><span class="pun">.</span><span class="typ">DaoConfig</span><span class="pln"> daoconfig </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DbManager</span><span class="pun">.</span><span class="typ">DaoConfig</span><span class="pun">();</span></code></li><li class="L6"><code><span class="pln">        </span><span class="com">//默认在data/data/包名/database/数据库名称</span></code></li><li class="L7"><code><span class="com">//        daoconfig.setDbDir()</span></code></li><li class="L8"><code><span class="pln">        daoconfig</span><span class="pun">.</span><span class="pln">setDbName</span><span class="pun">(</span><span class="str">"user.db"</span><span class="pun">);</span></code></li><li class="L9"><code><span class="com">//        daoconfig.setDbVersion(1);//默认1</span></code></li><li class="L0"><code><span class="pln">        </span><span class="com">//通过manager进行增删改查</span></code></li><li class="L1"><code><span class="pln">        </span><span class="kwd">return</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">getDb</span><span class="pun">(</span><span class="pln">daoconfig</span><span class="pun">);</span></code></li><li class="L2"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code><span class="pun">}</span></code></li></ol></pre><pre data-anchor-id="z8mq"><code>  这里在MyApp类中创建数据库的管理对象后，在整个App内的所有页面都内调用里面的对象和数据。 值得注意的是，MyApp要在AndroidManifest中注册 
</code></pre><p data-anchor-id="mw5x">（三）布局文件设计</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="h0hk"><ol class="linenums"><li class="L0"><code><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"utf-8"</span><span class="pun">?&gt;</span></code></li><li class="L1"><code><span class="tag">&lt;LinearLayout</span><span class="pln"> </span><span class="atn">xmlns:android</span><span class="pun">=</span><span class="atv">"http://schemas.android.com/apk/res/android"</span></code></li><li class="L2"><code><span class="pln">    </span><span class="atn">android:id</span><span class="pun">=</span><span class="atv">"@+id/activity_main"</span></code></li><li class="L3"><code><span class="pln">    </span><span class="atn">android:layout_width</span><span class="pun">=</span><span class="atv">"match_parent"</span></code></li><li class="L4"><code><span class="pln">    </span><span class="atn">android:layout_height</span><span class="pun">=</span><span class="atv">"match_parent"</span></code></li><li class="L5"><code><span class="pln">    </span><span class="atn">android:orientation</span><span class="pun">=</span><span class="atv">"vertical"</span><span class="tag">&gt;</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pln">    </span><span class="tag">&lt;Button</span></code></li><li class="L8"><code><span class="pln">        </span><span class="atn">android:layout_width</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L9"><code><span class="pln">        </span><span class="atn">android:layout_height</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L0"><code><span class="pln">        </span><span class="atn">android:onClick</span><span class="pun">=</span><span class="atv">"save"</span></code></li><li class="L1"><code><span class="pln">        </span><span class="atn">android:text</span><span class="pun">=</span><span class="atv">"save"</span></code></li><li class="L2"><code><span class="pln">        </span><span class="atn">android:textAllCaps</span><span class="pun">=</span><span class="atv">"false"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">    </span><span class="tag">&lt;Button</span></code></li><li class="L5"><code><span class="pln">        </span><span class="atn">android:layout_width</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L6"><code><span class="pln">        </span><span class="atn">android:layout_height</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L7"><code><span class="pln">        </span><span class="atn">android:onClick</span><span class="pun">=</span><span class="atv">"delete"</span></code></li><li class="L8"><code><span class="pln">        </span><span class="atn">android:text</span><span class="pun">=</span><span class="atv">"delete"</span></code></li><li class="L9"><code><span class="pln">        </span><span class="atn">android:textAllCaps</span><span class="pun">=</span><span class="atv">"false"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="pln">    </span><span class="tag">&lt;Button</span></code></li><li class="L2"><code><span class="pln">        </span><span class="atn">android:layout_width</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L3"><code><span class="pln">        </span><span class="atn">android:layout_height</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L4"><code><span class="pln">        </span><span class="atn">android:onClick</span><span class="pun">=</span><span class="atv">"update"</span></code></li><li class="L5"><code><span class="pln">        </span><span class="atn">android:text</span><span class="pun">=</span><span class="atv">"update"</span></code></li><li class="L6"><code><span class="pln">        </span><span class="atn">android:textAllCaps</span><span class="pun">=</span><span class="atv">"false"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pln">    </span><span class="tag">&lt;Button</span></code></li><li class="L9"><code><span class="pln">        </span><span class="atn">android:layout_width</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L0"><code><span class="pln">        </span><span class="atn">android:layout_height</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L1"><code><span class="pln">        </span><span class="atn">android:onClick</span><span class="pun">=</span><span class="atv">"query"</span></code></li><li class="L2"><code><span class="pln">        </span><span class="atn">android:text</span><span class="pun">=</span><span class="atv">"query"</span></code></li><li class="L3"><code><span class="pln">        </span><span class="atn">android:textAllCaps</span><span class="pun">=</span><span class="atv">"false"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L4"><code><span class="tag">&lt;/LinearLayout&gt;</span></code></li></ol></pre><pre data-anchor-id="it9p"><code>这里显示四个按钮实现简单的增删改查。 
Android:textAllCaps=”false” 解决了按钮默认显示字母大写的情况。
</code></pre><p data-anchor-id="gilg">（四）创建数据原型</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="w16d"><ol class="linenums"><li class="L0"><code><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">lwz</span><span class="pun">.</span><span class="pln">db</span><span class="pun">;</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">.</span><span class="pln">db</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">Column</span><span class="pun">;</span></code></li><li class="L3"><code><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">.</span><span class="pln">db</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">Table</span><span class="pun">;</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="com">/**</span></code></li><li class="L6"><code><span class="com"> * 数据原型</span></code></li><li class="L7"><code><span class="com"> * 这里要添加数据的注解，就可以对应数据库中的表和字段，</span></code></li><li class="L8"><code><span class="com"> * 注解也是xUtils中的工具类完成的</span></code></li><li class="L9"><code><span class="com"> */</span></code></li><li class="L0"><code><span class="lit">@Table</span><span class="pun">(</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">"table_user"</span><span class="pun">)</span><span class="com">//注释表名</span></code></li><li class="L1"><code><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">User</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">    </span><span class="lit">@Override</span></code></li><li class="L5"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="str">"User{"</span><span class="pln"> </span><span class="pun">+</span></code></li><li class="L7"><code><span class="pln">                </span><span class="str">"username='"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> username </span><span class="pun">+</span><span class="pln"> </span><span class="str">'\''</span><span class="pln"> </span><span class="pun">+</span></code></li><li class="L8"><code><span class="pln">                </span><span class="str">", id="</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> id </span><span class="pun">+</span></code></li><li class="L9"><code><span class="pln">                </span><span class="str">", password='"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> password </span><span class="pun">+</span><span class="pln"> </span><span class="str">'\''</span><span class="pln"> </span><span class="pun">+</span></code></li><li class="L0"><code><span class="pln">                </span><span class="str">", age="</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> age </span><span class="pun">+</span></code></li><li class="L1"><code><span class="pln">                </span><span class="str">", sex='"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> sex </span><span class="pun">+</span><span class="pln"> </span><span class="str">'\''</span><span class="pln"> </span><span class="pun">+</span></code></li><li class="L2"><code><span class="pln">                </span><span class="str">'}'</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pln">    </span><span class="lit">@Column</span><span class="pun">(</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">"username"</span><span class="pun">)</span><span class="com">//注释列名</span></code></li><li class="L6"><code><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> username</span><span class="pun">;</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pln">    </span><span class="lit">@Column</span><span class="pun">(</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">"id"</span><span class="pun">,</span><span class="pln"> isId </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> autoGen </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">)</span><span class="com">//注释列名主键，主动增长</span></code></li><li class="L9"><code><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> id</span><span class="pun">;</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="pln">    </span><span class="lit">@Column</span><span class="pun">(</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">"password"</span><span class="pun">)</span><span class="com">//注释列名</span></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> password</span><span class="pun">;</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">    </span><span class="lit">@Column</span><span class="pun">(</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">"age"</span><span class="pun">)</span><span class="com">//注释列名</span></code></li><li class="L5"><code><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> age</span><span class="pun">;</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pln">    </span><span class="lit">@Column</span><span class="pun">(</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">"sex"</span><span class="pun">)</span><span class="com">//注释列名</span></code></li><li class="L8"><code><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> sex</span><span class="pun">;</span></code></li><li class="L9"><code></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="pln">    </span><span class="com">//必须有空参的构造方法和set与get</span></code></li><li class="L2"><code></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getUsername</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">        </span><span class="kwd">return</span><span class="pln"> username</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setUsername</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> username</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">username </span><span class="pun">=</span><span class="pln"> username</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getId</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">        </span><span class="kwd">return</span><span class="pln"> id</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setId</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> id</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">id </span><span class="pun">=</span><span class="pln"> id</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getPassword</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">        </span><span class="kwd">return</span><span class="pln"> password</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setPassword</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> password</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">password </span><span class="pun">=</span><span class="pln"> password</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getAge</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">        </span><span class="kwd">return</span><span class="pln"> age</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setAge</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> age</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> age</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getSex</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">        </span><span class="kwd">return</span><span class="pln"> sex</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setSex</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> sex</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sex </span><span class="pun">=</span><span class="pln"> sex</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="j6lp">（五）增删改查的代码设计</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="rpid"><ol class="linenums"><li class="L0"><code><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">lwz</span><span class="pun">.</span><span class="pln">db</span><span class="pun">;</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">os</span><span class="pun">.</span><span class="typ">Bundle</span><span class="pun">;</span></code></li><li class="L3"><code><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">support</span><span class="pun">.</span><span class="pln">v7</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="typ">AppCompatActivity</span><span class="pun">;</span></code></li><li class="L4"><code><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Log</span><span class="pun">;</span></code></li><li class="L5"><code><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">view</span><span class="pun">.</span><span class="typ">View</span><span class="pun">;</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">.</span><span class="typ">DbManager</span><span class="pun">;</span></code></li><li class="L8"><code><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">.</span><span class="pln">common</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">KeyValue</span><span class="pun">;</span></code></li><li class="L9"><code><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">.</span><span class="pln">db</span><span class="pun">.</span><span class="pln">sqlite</span><span class="pun">.</span><span class="typ">WhereBuilder</span><span class="pun">;</span></code></li><li class="L0"><code><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">.</span><span class="pln">ex</span><span class="pun">.</span><span class="typ">DbException</span><span class="pun">;</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pun">;</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MainActivity</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AppCompatActivity</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pln">    </span><span class="lit">@Override</span></code></li><li class="L7"><code><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCreate</span><span class="pun">(</span><span class="typ">Bundle</span><span class="pln"> savedInstanceState</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">        </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">onCreate</span><span class="pun">(</span><span class="pln">savedInstanceState</span><span class="pun">);</span></code></li><li class="L9"><code><span class="pln">        setContentView</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">layout</span><span class="pun">.</span><span class="pln">activity_main</span><span class="pun">);</span></code></li><li class="L0"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">    </span><span class="com">/**</span></code></li><li class="L3"><code><span class="com">     * 实现数据库的存储</span></code></li><li class="L4"><code><span class="com">     */</span></code></li><li class="L5"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> save</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> view</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">        </span><span class="com">//获取数据库管理器</span></code></li><li class="L7"><code><span class="pln">        </span><span class="typ">DbManager</span><span class="pln"> manager </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MyApp</span><span class="pun">.</span><span class="pln">getInstance</span><span class="pun">().</span><span class="pln">getDbManager</span><span class="pun">();</span></code></li><li class="L8"><code><span class="pln">        </span><span class="com">//数据</span></code></li><li class="L9"><code><span class="pln">        </span><span class="typ">User</span><span class="pln"> user </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">User</span><span class="pun">();</span></code></li><li class="L0"><code><span class="pln">        </span><span class="com">// user.setId(1);//自增长的id设置了也是没有用的</span></code></li><li class="L1"><code><span class="pln">        user</span><span class="pun">.</span><span class="pln">setSex</span><span class="pun">(</span><span class="str">"女"</span><span class="pun">);</span></code></li><li class="L2"><code><span class="pln">        user</span><span class="pun">.</span><span class="pln">setPassword</span><span class="pun">(</span><span class="str">"123456"</span><span class="pun">);</span></code></li><li class="L3"><code><span class="pln">        user</span><span class="pun">.</span><span class="pln">setUsername</span><span class="pun">(</span><span class="str">"李文"</span><span class="pun">);</span></code></li><li class="L4"><code><span class="pln">        user</span><span class="pun">.</span><span class="pln">setAge</span><span class="pun">(</span><span class="lit">18</span><span class="pun">);</span></code></li><li class="L5"><code><span class="pln">        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">            </span><span class="com">//实现数据的存储,配合User类中的注释才能进行对应的存储</span></code></li><li class="L7"><code><span class="pln">            </span><span class="com">//表名和列名都是在User中注释决定的。</span></code></li><li class="L8"><code><span class="pln">            manager</span><span class="pun">.</span><span class="pln">save</span><span class="pun">(</span><span class="pln">user</span><span class="pun">);</span><span class="com">//保存</span></code></li><li class="L9"><code><span class="pln">            </span><span class="com">// manager.saveOrUpdate(user);//保存或更新，这如果数据不存在是不会保存的，存在的话会跟新</span></code></li><li class="L0"><code><span class="pln">        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">DbException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">            e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span></code></li><li class="L2"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pln">    </span><span class="com">/**</span></code></li><li class="L7"><code><span class="com">     * 删除数据</span></code></li><li class="L8"><code><span class="com">     * //删除整个表的所有数据</span></code></li><li class="L9"><code><span class="com">     * //manager.delete(User.class);</span></code></li><li class="L0"><code><span class="com">     * //删除指定id的记录</span></code></li><li class="L1"><code><span class="com">     * //manager.deleteById(User.class,1);</span></code></li><li class="L2"><code><span class="com">     * //删除某一类数据  where name="张三"</span></code></li><li class="L3"><code><span class="com">     * manager.delete(User.class, WhereBuilder.b("username", "=", "王五").and("age", "&lt;", "100"));</span></code></li><li class="L4"><code><span class="com">     */</span></code></li><li class="L5"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="kwd">delete</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> view</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">        </span><span class="typ">DbManager</span><span class="pln"> manager </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MyApp</span><span class="pun">.</span><span class="pln">getInstance</span><span class="pun">().</span><span class="pln">getDbManager</span><span class="pun">();</span></code></li><li class="L7"><code><span class="pln">        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">            manager</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="typ">User</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">WhereBuilder</span><span class="pun">.</span><span class="pln">b</span><span class="pun">(</span><span class="str">"username"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"="</span><span class="pun">,</span><span class="pln"> </span><span class="str">"李文"</span><span class="pun">));</span></code></li><li class="L9"><code><span class="pln">        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">DbException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code><span class="pln">            e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L3"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pln">    </span><span class="com">/**</span></code></li><li class="L6"><code><span class="com">     * 修改数据</span></code></li><li class="L7"><code><span class="com">     */</span></code></li><li class="L8"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> update</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> view</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">        </span><span class="typ">DbManager</span><span class="pln"> manager </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MyApp</span><span class="pun">.</span><span class="pln">getInstance</span><span class="pun">().</span><span class="pln">getDbManager</span><span class="pun">();</span></code></li><li class="L0"><code><span class="pln">        </span><span class="com">//要修改的数据，以键值对的显示传入,</span></code></li><li class="L1"><code><span class="pln">        </span><span class="typ">KeyValue</span><span class="pln"> keyValue </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">KeyValue</span><span class="pun">(</span><span class="str">"username"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"李世民"</span><span class="pun">);</span></code></li><li class="L2"><code><span class="pln">        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">            </span><span class="com">//过滤年龄小于20的数据就修改,这里可以设置多个keyValue值</span></code></li><li class="L4"><code><span class="pln">            manager</span><span class="pun">.</span><span class="pln">update</span><span class="pun">(</span><span class="typ">User</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">WhereBuilder</span><span class="pun">.</span><span class="pln">b</span><span class="pun">(</span><span class="str">"age"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"&lt;"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"20"</span><span class="pun">),</span><span class="pln"> keyValue</span><span class="pun">);</span></code></li><li class="L5"><code><span class="pln">        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">DbException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">            e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span></code></li><li class="L7"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L8"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code><span class="com">     * 查找数据</span></code></li><li class="L2"><code><span class="com">     */</span></code></li><li class="L3"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> query</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> view</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">        </span><span class="com">//查询所有</span></code></li><li class="L5"><code><span class="pln">        </span><span class="com">//获取管理器</span></code></li><li class="L6"><code><span class="pln">        </span><span class="typ">DbManager</span><span class="pln"> manager </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MyApp</span><span class="pun">.</span><span class="pln">getInstance</span><span class="pun">().</span><span class="pln">getDbManager</span><span class="pun">();</span></code></li><li class="L7"><code><span class="pln">        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">            </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">User</span><span class="pun">&gt;</span><span class="pln"> all </span><span class="pun">=</span><span class="pln"> manager</span><span class="pun">.</span><span class="pln">findAll</span><span class="pun">(</span><span class="typ">User</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></code></li><li class="L9"><code><span class="pln">            </span><span class="com">//manager.findById()找单个的对象</span></code></li><li class="L0"><code><span class="pln">            </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> all</span><span class="pun">.</span><span class="pln">size</span><span class="pun">();</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">                </span><span class="typ">Log</span><span class="pun">.</span><span class="pln">e</span><span class="pun">(</span><span class="str">"TAG"</span><span class="pun">,</span><span class="pln"> all</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">i</span><span class="pun">).</span><span class="pln">toString</span><span class="pun">());</span><span class="com">//打印显示</span></code></li><li class="L2"><code><span class="pln">            </span><span class="pun">}</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">DbException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">            e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span></code></li><li class="L6"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L7"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code></code></li><li class="L9"><code><span class="pun">}</span></code></li></ol></pre><pre data-anchor-id="tb29"><code>    这里就用xUtils简单的实现了增删改查的功能， 
    这里是可以添加文本框来实现某些数据的增删改查的。 
    通过xUtils实现数据库的增删改查，不需要写很多的创建表和列的语句，对应用户开发是非常方便的。
</code></pre></div>
</body>
</html>