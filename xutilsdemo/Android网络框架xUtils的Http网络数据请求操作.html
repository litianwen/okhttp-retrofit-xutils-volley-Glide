<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Android网络框架xUtils的Http网络数据请求操作</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="l67n" id="android网络框架xutils的http网络数据请求操作">Android网络框架xUtils的Http网络数据请求操作</h1><p data-anchor-id="q07j"><code>未分类</code></p><hr><p data-anchor-id="a64w"><strong>一．目前xUtils主要有四大模块：</strong></p><blockquote data-anchor-id="ltda" class="white-blockquote">
  <p>DbUtils模块：用于数据库的操作，也是需要注解方式指定表名和列名；  <br>
  ViewUtils模块：注解方式就可以进行UI，资源和事件绑定；  <br>
  HttpUtils模块：用于网络数据的请求；  <br>
  BitmapUtils模块：用于图片的下载和绑定视图；</p>
</blockquote><p data-anchor-id="098k">本文主要讲解xUtils中的Http网络数据请求操作。</p><p data-anchor-id="gus8">使用：  <br>
AndroidStudio使用xUtils之前添加依赖就可以了：</p><blockquote data-anchor-id="vfqf" class="white-blockquote">
  <p>compile 'org.xutils:xutils:3.3.38'</p>
</blockquote><p data-anchor-id="qffn">GitHub中的源码地址：<a href="https://github.com/wyouflf/xUtils3" target="_blank">https://github.com/wyouflf/xUtils3</a></p><p data-anchor-id="xvj5"><strong>二．使用示例</strong></p><p data-anchor-id="fuhz">（一）添加依赖语句</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="37mh"><ol class="linenums"><li class="L0"><code><span class="pln"> compile </span><span class="str">'org.xutils:xutils:3.3.38'</span></code></li></ol></pre><p data-anchor-id="5iig">（二）添加权限</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="5wyd"><ol class="linenums"><li class="L0"><code><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.INTERNET"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L1"><code><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.WRITE_EXTERNAL_STORAGE"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li></ol></pre><p data-anchor-id="kypa">（三）在自己的Application中的onCreate方法里注册xutils</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="0spv"><ol class="linenums"><li class="L0"><code><span class="pln">x</span><span class="pun">.</span><span class="typ">Ext</span><span class="pun">.</span><span class="pln">init</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li></ol></pre><p data-anchor-id="s620">这里要记得在AndroidManifest中添加Application中的name。</p><p data-anchor-id="kuoy">（四）设计布局activity_main.xml文件</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="htzo"><ol class="linenums"><li class="L0"><code><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"utf-8"</span><span class="pun">?&gt;</span></code></li><li class="L1"><code><span class="tag">&lt;LinearLayout</span><span class="pln"> </span><span class="atn">xmlns:android</span><span class="pun">=</span><span class="atv">"http://schemas.android.com/apk/res/android"</span></code></li><li class="L2"><code><span class="pln">    </span><span class="atn">android:layout_width</span><span class="pun">=</span><span class="atv">"match_parent"</span></code></li><li class="L3"><code><span class="pln">    </span><span class="atn">android:layout_height</span><span class="pun">=</span><span class="atv">"match_parent"</span></code></li><li class="L4"><code><span class="pln">    </span><span class="atn">android:orientation</span><span class="pun">=</span><span class="atv">"vertical"</span><span class="tag">&gt;</span></code></li><li class="L5"><code></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pln">    </span><span class="tag">&lt;Button</span></code></li><li class="L8"><code><span class="pln">        </span><span class="atn">android:layout_width</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L9"><code><span class="pln">        </span><span class="atn">android:layout_height</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L0"><code><span class="pln">        </span><span class="atn">android:onClick</span><span class="pun">=</span><span class="atv">"btn1"</span></code></li><li class="L1"><code><span class="pln">        </span><span class="atn">android:text</span><span class="pun">=</span><span class="atv">"btn1"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pln">    </span><span class="tag">&lt;Button</span></code></li><li class="L4"><code><span class="pln">        </span><span class="atn">android:layout_width</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L5"><code><span class="pln">        </span><span class="atn">android:layout_height</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L6"><code><span class="pln">        </span><span class="atn">android:onClick</span><span class="pun">=</span><span class="atv">"btn2"</span></code></li><li class="L7"><code><span class="pln">        </span><span class="atn">android:text</span><span class="pun">=</span><span class="atv">"btn2"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L8"><code></code></li><li class="L9"><code><span class="pln">    </span><span class="tag">&lt;Button</span></code></li><li class="L0"><code><span class="pln">        </span><span class="atn">android:layout_width</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L1"><code><span class="pln">        </span><span class="atn">android:layout_height</span><span class="pun">=</span><span class="atv">"wrap_content"</span></code></li><li class="L2"><code><span class="pln">        </span><span class="atn">android:onClick</span><span class="pun">=</span><span class="atv">"btn3"</span></code></li><li class="L3"><code><span class="pln">        </span><span class="atn">android:text</span><span class="pun">=</span><span class="atv">"btn3"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="tag">&lt;/LinearLayout&gt;</span></code></li></ol></pre><p data-anchor-id="6qts">（五）java代码设计</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="zuou"><ol class="linenums"><li class="L0"><code><span class="kwd">package</span><span class="pln"> fuxi</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">;</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">os</span><span class="pun">.</span><span class="typ">Bundle</span><span class="pun">;</span></code></li><li class="L3"><code><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">support</span><span class="pun">.</span><span class="pln">v7</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="typ">AppCompatActivity</span><span class="pun">;</span></code></li><li class="L4"><code><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">view</span><span class="pun">.</span><span class="typ">View</span><span class="pun">;</span></code></li><li class="L5"><code><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">widget</span><span class="pun">.</span><span class="typ">Toast</span><span class="pun">;</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">.</span><span class="pln">common</span><span class="pun">.</span><span class="typ">Callback</span><span class="pun">;</span></code></li><li class="L8"><code><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">.</span><span class="pln">http</span><span class="pun">.</span><span class="typ">RequestParams</span><span class="pun">;</span></code></li><li class="L9"><code><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">xutils</span><span class="pun">.</span><span class="pln">x</span><span class="pun">;</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="com">/**</span></code></li><li class="L2"><code><span class="com"> * xUtils中的HttpUtils的使用示例</span></code></li><li class="L3"><code><span class="com"> */</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HttpUtilsDemo</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AppCompatActivity</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">    </span><span class="lit">@Override</span></code></li><li class="L7"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCreate</span><span class="pun">(</span><span class="typ">Bundle</span><span class="pln"> savedInstanceState</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">        </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">onCreate</span><span class="pun">(</span><span class="pln">savedInstanceState</span><span class="pun">);</span></code></li><li class="L9"><code><span class="pln">        setContentView</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">layout</span><span class="pun">.</span><span class="pln">activity_main2</span><span class="pun">);</span></code></li><li class="L0"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">    </span><span class="com">/**</span></code></li><li class="L3"><code><span class="com">     * get的方式请求网络字符串数据</span></code></li><li class="L4"><code><span class="com">     * 这里请求的是html百度网页的源码数据</span></code></li><li class="L5"><code><span class="com">     */</span></code></li><li class="L6"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> btn1</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> view</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">        </span><span class="com">//设置Url地址</span></code></li><li class="L8"><code><span class="pln">        </span><span class="typ">RequestParams</span><span class="pln"> entity </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RequestParams</span><span class="pun">(</span><span class="str">"https://www.baidu.com"</span><span class="pun">);</span></code></li><li class="L9"><code><span class="pln">        </span><span class="com">//数据请求，这里先要设置回到的call接口对象,数据在接口对象的方法中获取</span></code></li><li class="L0"><code><span class="pln">        x</span><span class="pun">.</span><span class="pln">http</span><span class="pun">().</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">entity</span><span class="pun">,</span><span class="pln"> call</span><span class="pun">);</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">    </span><span class="com">/**</span></code></li><li class="L5"><code><span class="com">     * get的方式请求网络json字符串数据</span></code></li><li class="L6"><code><span class="com">     * 传入一些键值对的值</span></code></li><li class="L7"><code><span class="com">     * 这里演示的是ShowAPI网站中的示例</span></code></li><li class="L8"><code><span class="com">     */</span></code></li><li class="L9"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> btn2</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> view</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code><span class="pln">        </span><span class="com">//设置Url地址</span></code></li><li class="L1"><code><span class="pln">        </span><span class="typ">RequestParams</span><span class="pln"> entity </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RequestParams</span><span class="pun">(</span><span class="str">"http://route.showapi.com/341-3?"</span><span class="pun">);</span></code></li><li class="L2"><code><span class="pln">        entity</span><span class="pun">.</span><span class="pln">addQueryStringParameter</span><span class="pun">(</span><span class="str">"showapi_appid"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"13074"</span><span class="pun">);</span></code></li><li class="L3"><code><span class="pln">        entity</span><span class="pun">.</span><span class="pln">addQueryStringParameter</span><span class="pun">(</span><span class="str">"showapi_sign"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"ea5b4bf2e140498bb772d1bf2a51a7a0"</span><span class="pun">);</span></code></li><li class="L4"><code><span class="pln">        </span><span class="com">//数据请求，这里先要设置回到的call接口对象,数据在接口对象的方法中获取</span></code></li><li class="L5"><code><span class="pln">        x</span><span class="pun">.</span><span class="pln">http</span><span class="pun">().</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">entity</span><span class="pun">,</span><span class="pln"> call</span><span class="pun">);</span></code></li><li class="L6"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pln">    </span><span class="com">/**</span></code></li><li class="L9"><code><span class="com">     * get的方式请求网络数据</span></code></li><li class="L0"><code><span class="com">     * 这里使用的是有缓存的数据的请求</span></code></li><li class="L1"><code><span class="com">     */</span></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> btn3</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> view</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">        </span><span class="typ">RequestParams</span><span class="pln"> entity </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RequestParams</span><span class="pun">(</span><span class="str">"https://www.baidu.com"</span><span class="pun">);</span></code></li><li class="L4"><code><span class="pln">        </span><span class="com">// 默认缓存存活时间, 单位:毫秒.(如果服务没有返回有效的max-age或Expires)</span></code></li><li class="L5"><code><span class="pln">        entity</span><span class="pun">.</span><span class="pln">setCacheMaxAge</span><span class="pun">(</span><span class="lit">1000</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">60</span><span class="pun">);</span></code></li><li class="L6"><code><span class="pln">        </span><span class="com">// 使用CacheCallback, xUtils将为该请求缓存数据.</span></code></li><li class="L7"><code><span class="pln">        </span><span class="typ">Callback</span><span class="pun">.</span><span class="typ">Cancelable</span><span class="pln"> cancelable </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">http</span><span class="pun">().</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">entity</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Callback</span><span class="pun">.</span><span class="typ">CacheCallback</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code></code></li><li class="L9"><code><span class="pln">            </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> hasError </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pln">            </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">            </span><span class="lit">@Override</span></code></li><li class="L3"><code><span class="pln">            </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> onCache</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">                </span><span class="com">// 得到缓存数据, 缓存过期后不会进入这个方法.</span></code></li><li class="L5"><code><span class="pln">                </span><span class="com">// * 如果信任该缓存返回 true, 将不再请求网络;</span></code></li><li class="L6"><code><span class="pln">                </span><span class="com">//   返回 false 继续请求网络, 但会在请求头中加上ETag, Last-Modified等信息,</span></code></li><li class="L7"><code><span class="pln">                </span><span class="com">//   如果服务端返回304, 则表示数据没有更新, 不继续加载数据.</span></code></li><li class="L8"><code><span class="pln">                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">result </span><span class="pun">=</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L9"><code><span class="pln">                </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln"> </span><span class="com">// true: 信任缓存数据, 不在发起网络请求; false不信任缓存数据.</span></code></li><li class="L0"><code><span class="pln">            </span><span class="pun">}</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">            </span><span class="lit">@Override</span></code></li><li class="L3"><code><span class="pln">            </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onSuccess</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">                </span><span class="com">// 注意: 如果服务返回304 或 onCache 选择了信任缓存, 这时result为null.</span></code></li><li class="L5"><code><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">                    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">result </span><span class="pun">=</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pln">                </span><span class="pun">}</span></code></li><li class="L8"><code><span class="pln">            </span><span class="pun">}</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="pln">            </span><span class="lit">@Override</span></code></li><li class="L1"><code><span class="pln">            </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onError</span><span class="pun">(</span><span class="typ">Throwable</span><span class="pln"> ex</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isOnCallback</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">                hasError </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">                </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">makeText</span><span class="pun">(</span><span class="pln">x</span><span class="pun">.</span><span class="pln">app</span><span class="pun">(),</span><span class="pln"> ex</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">(),</span><span class="pln"> </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">LENGTH_LONG</span><span class="pun">).</span><span class="pln">show</span><span class="pun">();</span></code></li><li class="L4"><code><span class="pln">            </span><span class="pun">}</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pln">            </span><span class="lit">@Override</span></code></li><li class="L7"><code><span class="pln">            </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCancelled</span><span class="pun">(</span><span class="typ">CancelledException</span><span class="pln"> cex</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">                </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">makeText</span><span class="pun">(</span><span class="pln">x</span><span class="pun">.</span><span class="pln">app</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"cancelled"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">LENGTH_LONG</span><span class="pun">).</span><span class="pln">show</span><span class="pun">();</span></code></li><li class="L9"><code><span class="pln">            </span><span class="pun">}</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="pln">            </span><span class="lit">@Override</span></code></li><li class="L2"><code><span class="pln">            </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onFinished</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">hasError </span><span class="pun">&amp;&amp;</span><span class="pln"> result </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">                    </span><span class="com">// 成功获取数据</span></code></li><li class="L5"><code><span class="pln">                    </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">makeText</span><span class="pun">(</span><span class="pln">x</span><span class="pun">.</span><span class="pln">app</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"finish"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> result</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">LENGTH_LONG</span><span class="pun">).</span><span class="pln">show</span><span class="pun">();</span></code></li><li class="L6"><code><span class="pln">                </span><span class="pun">}</span></code></li><li class="L7"><code><span class="pln">            </span><span class="pun">}</span></code></li><li class="L8"><code><span class="pln">        </span><span class="pun">});</span></code></li><li class="L9"><code></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pln">    </span><span class="com">/**</span></code></li><li class="L4"><code><span class="com">     * 网络请求时的callBack回调对象</span></code></li><li class="L5"><code><span class="com">     */</span></code></li><li class="L6"><code><span class="pln">    </span><span class="typ">Callback</span><span class="pun">.</span><span class="typ">CommonCallback</span><span class="pln"> call </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Callback</span><span class="pun">.</span><span class="typ">CommonCallback</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">        </span><span class="lit">@Override</span></code></li><li class="L8"><code><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onSuccess</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">            </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">makeText</span><span class="pun">(</span><span class="pln">x</span><span class="pun">.</span><span class="pln">app</span><span class="pun">(),</span><span class="pln"> result</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">LENGTH_LONG</span><span class="pun">).</span><span class="pln">show</span><span class="pun">();</span></code></li><li class="L0"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">        </span><span class="lit">@Override</span></code></li><li class="L3"><code><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onError</span><span class="pun">(</span><span class="typ">Throwable</span><span class="pln"> ex</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isOnCallback</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">            </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">makeText</span><span class="pun">(</span><span class="pln">x</span><span class="pun">.</span><span class="pln">app</span><span class="pun">(),</span><span class="pln"> ex</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">(),</span><span class="pln"> </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">LENGTH_LONG</span><span class="pun">).</span><span class="pln">show</span><span class="pun">();</span></code></li><li class="L5"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pln">        </span><span class="lit">@Override</span></code></li><li class="L8"><code><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCancelled</span><span class="pun">(</span><span class="typ">Callback</span><span class="pun">.</span><span class="typ">CancelledException</span><span class="pln"> cex</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">            </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">makeText</span><span class="pun">(</span><span class="pln">x</span><span class="pun">.</span><span class="pln">app</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"cancelled"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">LENGTH_LONG</span><span class="pun">).</span><span class="pln">show</span><span class="pun">();</span></code></li><li class="L0"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">        </span><span class="lit">@Override</span></code></li><li class="L3"><code><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onFinished</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L6"><code><span class="pln">    </span><span class="pun">};</span></code></li><li class="L7"><code></code></li><li class="L8"><code></code></li><li class="L9"><code><span class="pun">}</span></code></li></ol></pre></div>
</body>
</html>